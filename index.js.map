{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox'; \nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderImages(images, append = false) {\n  if (!append) {\n    gallery.innerHTML = ''; \n  }\n\n  if (images.length === 0) {\n    showErrorMessage();\n    return;\n  }\n\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <div class=\"gallery-item\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"image-info\">\n        <div class=\"item\"><span class=\"label\">Likes</span><span class=\"count\">${likes}</span></div>\n        <div class=\"item\"><span class=\"label\">Views</span><span class=\"count\">${views}</span></div>\n        <div class=\"item\"><span class=\"label\">Comments</span><span class=\"count\">${comments}</span></div>\n        <div class=\"item\"><span class=\"label\">Downloads</span><span class=\"count\">${downloads}</span></div>\n      </div>\n    </div>\n  `).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  \n  lightbox.refresh(); \n\n  smoothScroll();\n}\n\nfunction smoothScroll() {\n  const firstGalleryItem = document.querySelector('.gallery-item');\n  if (firstGalleryItem) {\n    const cardHeight = firstGalleryItem.getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n  }\n}\n\nexport function showErrorMessage() {\n  iziToast.error({\n    title: 'Error',\n    message: 'Sorry, no images match your search. Please try again!',\n    position: 'topRight',\n  });\n}\n\nexport function showEndMessage() {\n  const message = document.createElement('p');\n  message.classList.add('end-message');\n  message.textContent = \"We're sorry, but you've reached the end of search results.\";\n  gallery.after(message);\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (loadMoreButton) {\n    loadMoreButton.style.display = 'none';\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","import { renderImages, showEndMessage, hideLoadMoreButton } from './js/render-functions.js';  \nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './css/styles.css';  \n\nconst form = document.querySelector('.search-form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet searchQuery = '';\nlet currentPage = 1;\nconst perPage = 40;\nlet totalHits = 0;\nlet loadedImages = new Set();\n\nfunction showLoader() {\n  document.getElementById('loading-overlay').style.display = 'flex';\n}\n\nfunction hideLoader() {\n  document.getElementById('loading-overlay').style.display = 'none';\n}\n\nasync function loadImages(query, page) {\n  if (!query.trim()) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a valid search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader();\n\n  try {\n    const response = await fetchImages(query, page, perPage);\n\n    if (!response || !response.hits || response.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, no images match your search. Please try again!',\n        position: 'topRight',\n      });\n      hideLoader();\n      return;\n    }\n\n    totalHits = Math.min(response.totalHits, 500);\n    const newImages = response.hits.filter(image => !loadedImages.has(image.id));\n\n    if (newImages.length > 0) {\n      renderImages(newImages, currentPage > 1);\n      newImages.forEach(image => loadedImages.add(image.id));\n    }\n\n    if (totalHits <= currentPage * perPage) {\n      hideLoadMoreButton();\n      showEndMessage();\n    } else {\n      loadMoreButton.style.display = 'block';\n    }\n\n    smoothScroll();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load images. Please try again.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction smoothScroll() {\n  const firstGalleryItem = document.querySelector('.gallery-item');\n  if (firstGalleryItem) {\n    const cardHeight = firstGalleryItem.getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n  }\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  searchQuery = event.target.elements.searchQuery.value.trim();\n  if (!searchQuery) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a valid search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  totalHits = 0;\n  loadedImages.clear();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const response = await fetchImages(searchQuery, currentPage, perPage);\n\n    if (!response || !response.hits || response.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, no images match your search. Please try again!',\n        position: 'topRight',\n      });\n      hideLoader();\n      return;\n    }\n\n    renderImages(response.hits);\n    totalHits = response.totalHits;\n\n    if (totalHits > perPage) {\n      loadMoreButton.style.display = 'block';\n    } else {\n      showEndMessage();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load images. Please try again.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const response = await fetchImages(searchQuery, currentPage, perPage);\n\n    if (response && response.hits.length > 0) {\n      const newImages = response.hits.filter(image => !loadedImages.has(image.id));\n      renderImages(newImages, true);\n      newImages.forEach(image => loadedImages.add(image.id));\n\n      if (currentPage * perPage >= totalHits) {\n        hideLoadMoreButton();\n        showEndMessage();\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load more images. Please try again.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["gallery","lightbox","SimpleLightbox","renderImages","images","append","showErrorMessage","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","smoothScroll","firstGalleryItem","cardHeight","showEndMessage","message","hideLoadMoreButton","loadMoreButton","form","searchQuery","currentPage","perPage","totalHits","loadedImages","showLoader","hideLoader","event","iziToast","response","newImages","image"],"mappings":"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"}